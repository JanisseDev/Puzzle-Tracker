<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Puzzle tracker</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:image" content="img/icon-512.png">
    <link rel="shortcut icon" href="img/icon-512.png">
    <link rel="manifest" href="./manifest.webmanifest" />
    <link rel="stylesheet" href="./theme.css" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./puzzlePage.css" />
    <script src="./app.js" defer></script>
    <script src="./utils.js" defer></script>
    <script src="./puzzlePage.js" defer></script>
</head>

<body>
    <div class="mainFlex">
        <header>
            <h1 class="title">Puzzle tracker</h1>
        </header>
        <div class="mainView">
            <h2 id="puzzleTitle"></h2>

            <div id="statGrid" class="statGrid">
                <div class="statCell clickable"  onclick="setupGraph(getProgressionGraphData());">
                    <div id="progressCircle" class="progressCircle">
                        <h3 id="progressText" class="progressText"></h3>
                    </div>
                    <p id="progressTitle" class="statTitle">Progression</p>
                </div>
                <div class="statCell clickable" onclick="setupGraph(getDurationGraphData());">
                    <h3 id="totalTime" class="statValue">-</h3>
                    <p class="statTitle">Total time</p>
                </div>
                <div class="statCell clickable"  onclick="setupGraph(getAddPiecesGraphData());">
                    <h3 id="addedPieces" class="statValue">-</h3>
                    <p class="statTitle">Added pieces</p>
                </div>
                <div class="statCell clickable" onclick="setupGraph(getTotalPiecesLeftGraphData());">
                    <h3 id="piecesLeft" class="statValue">-</h3>
                    <p class="statTitle">Pieces left</p>
                </div>
                <div class="statCell clickable" onclick="setupGraph(getPiecesPerHourGraphData());">
                    <h3 id="piecesPerHour" class="statValue">-</h3>
                    <p class="statTitle">Pieces/h</p>
                </div>
                <div class="statCell">
                    <h3 id="sessionCount" class="statValue">-</h3>
                    <p class="statTitle">Session count</p>
                </div>
                <div class="statCell">
                    <h3 id="startedAgo" class="statValue">-</h3>
                    <p class="statTitle">Started</p>
                </div>
            </div>

            <div id="sessionGraph" class="sessionGraph">
                <!-- Generated sessionGraphCell here -->
            </div>

            <button style="flex-basis: 100%;" onclick="newSessionClicked()">New session</button>
            <button style="flex-grow: 1;" onclick="exportJson()">Export data</button>â€‹
            <button style="flex-grow: 1;" onclick="importJson()">Import data</button>
            <input id="importData" type="file" />

            <!-- DEBUG -->
            <details style="flex-basis: 100%;">
                <summary>Debug JSON</summary>
                <p id="debugJson"></p>
            </details>
        </div>
    </div>

    <!-- DIALOGS -->
    <dialog id="newSessionDialog">
        <h3>Enter your session's data:</h3>
        <form id="newSessionForm" method="dialog">
            <label for="sessionDuration">Session duration: </label>
            <input id="sessionDuration" type="time" name="sessionDuration" required />
            </br>
            <label for="addedPieces">Added piece during the session: </label>
            <input id="addedPieces" type="number" name="addedPieces" required />
            </br>
            <label for="sessionDate">Session date: </label>
            <input id="sessionDate" type="datetime-local" name="sessionDate" required />
            </br></br>
            <div>
                <input type="button" value="Cancel" onclick="newSessionDialogCancel()">
                <input type="button" value="Submit" onclick="newSessionDialogSubmit()">
            </div>
        </form>
    </dialog>
</body>

</html>